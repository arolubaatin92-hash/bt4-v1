<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Device Data Extractor & Telegram Sender</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: #f7f8fa;
      font-family: 'Segoe UI', Verdana, Arial, sans-serif;
      color: #2a2a2a;
      margin: 0;
    }
    .container {
      max-width: 420px;
      margin: 32px auto;
      background: #fff;
      padding: 32px 24px;
      border-radius: 10px;
      box-shadow: 0 1px 8px rgba(0,0,0,0.07);
    }
    h1 {
      text-align: center;
      font-size: 1.6em;
      margin-bottom: 16px;
      color: #2470c7;
    }
    .section {
      margin-bottom: 26px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    label {
      display: block;
      margin: 12px 0 4px 2px;
      font-weight: 500;
    }
    input, select, textarea, button {
      font-size: 1em;
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #c6c6c8;
    }
    button {
      background: linear-gradient(90deg, #4681e4 0%, #4fbcab 100%);
      color: #fff;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: background .2s;
    }
    button:hover {
      background: linear-gradient(90deg, #386ab2 0%, #449c87 100%);
    }
    .extracted {
      background: #f2f5ff;
      font-size: .95em;
      border-left: 3px solid #90c7ffd2;
      padding: 12px 16px;
      margin-bottom: 10px;
      max-height: 180px;
      overflow-y: auto;
      border-radius: 6px;
      color: #2e3f4f;
    }
    .note {
      font-size: .93em;
      color: #555;
      margin-top: -7px;
      margin-bottom: 18px;
    }
    .success {
      background: #e6ffe6;
      color: #246b2c;
      border: 1px solid #b9ffbc;
      padding: 10px 16px;
      margin-bottom: 13px;
      border-radius: 6px;
    }
    .error {
      background: #fff0f0;
      color: #b24c48;
      border: 1px solid #ffd4d4;
      padding: 10px 16px;
      margin-bottom: 13px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Device & Data Sender to Telegram</h1>
  
  <div class="section">
    <label for="botToken">Telegram Bot Token</label>
    <input type="text" id="botToken" placeholder="Enter Bot API token" autocomplete="off">

    <label for="chatId">Telegram Chat ID</label>
    <input type="text" id="chatId" placeholder="Enter Chat ID" autocomplete="off">
  </div>
  
  <div class="section">
    <label>Extract & Send Device Info</label>
    <div class="note">Collects browser/device information. No personal files are included.</div>
    <div class="extracted" id="deviceInfoPreview"></div>
    <button id="extractSendBtn">Send Device Info to Telegram</button>
    <div id="deviceStatus"></div>
  </div>
  
  <div class="section">
    <label>Manual File/Data Upload</label>
    <div class="note">Select files (images, docs, etc.) and send them via Telegram bot. Large files may take longer to send.</div>
    <input type="file" id="fileInput" multiple>
    <button id="uploadBtn">Send Selected File(s) to Telegram</button>
    <div id="uploadStatus"></div>
  </div>
</div>

<script>
function getDeviceInfo() {
  let info = {};

  // Basic info
  info.userAgent = navigator.userAgent;
  info.platform = navigator.platform;
  info.language = navigator.language;
  info.languages = navigator.languages;
  info.cookieEnabled = navigator.cookieEnabled;
  // Screen
  info.screen = {
    width: screen.width,
    height: screen.height,
    availWidth: screen.availWidth,
    availHeight: screen.availHeight,
    colorDepth: screen.colorDepth,
    pixelDepth: screen.pixelDepth,
    orientation: screen.orientation ? screen.orientation.type : undefined
  };
  // Window
  info.window = {
    innerWidth: window.innerWidth,
    innerHeight: window.innerHeight,
    outerWidth: window.outerWidth,
    outerHeight: window.outerHeight
  };
  info.onLine = navigator.onLine;
  // Timezone
  info.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
  info.plugins = [];
  for (let i = 0; i < navigator.plugins.length; i++) {
    info.plugins.push(navigator.plugins[i].name);
  }
  info.hardwareConcurrency = navigator.hardwareConcurrency;
  info.deviceMemory = navigator.deviceMemory;
  info.maxTouchPoints = navigator.maxTouchPoints;
  info.productSub = navigator.productSub;
  info.vendor = navigator.vendor;
  info.appName = navigator.appName;
  info.appVersion = navigator.appVersion;
  info.doNotTrack = navigator.doNotTrack;
  // Referrer and location
  info.referrer = document.referrer;
  info.location = window.location.href;
  // Battery
  info.battery = "unknown";
  if (navigator.getBattery) {
    // async battery info not shown here (for preview), added before sending
    info.battery = "will be appended";
  }
  return info;
}
function previewDeviceInfo() {
  const info = getDeviceInfo();
  document.getElementById('deviceInfoPreview').textContent = JSON.stringify(info, null, 2);
}

// Attach preview update
previewDeviceInfo();

async function extractAndSend() {
  const deviceStatus = document.getElementById('deviceStatus');
  deviceStatus.textContent = "";
  const botToken = document.getElementById('botToken').value.trim();
  const chatId = document.getElementById('chatId').value.trim();
  if (!botToken || !chatId) {
    deviceStatus.innerHTML = "<div class='error'>Please enter your Telegram bot token and chat ID.</div>";
    return;
  }
  let info = getDeviceInfo();
  // Battery info async
  if (navigator.getBattery) {
    try {
      let battery = await navigator.getBattery();
      info.battery = {
        charging: battery.charging,
        chargingTime: battery.chargingTime,
        dischargingTime: battery.dischargingTime,
        level: battery.level
      };
    } catch(e) { info.battery = "error"; }
  }
  let text = "*Extracted Device Info:*\n\n" + "```json\n" + JSON.stringify(info, null, 2).replace(/`/g, '\\`') + "\n```";
  // Telegram max message length: 4096 chars. If too large, split chunks
  if (text.length > 4000) {
    // Send as doc if too big
    let blob = new Blob([JSON.stringify(info, null, 2)], {type: "application/json"});
    await sendDocumentToTelegram(botToken, chatId, blob, "device_info.json", deviceStatus);
  } else {
    await sendTextToTelegram(botToken, chatId, text, deviceStatus);
  }
}
async function sendTextToTelegram(token, chat_id, text, statusEl) {
  let url = `https://api.telegram.org/bot${token}/sendMessage`;
  let params = new URLSearchParams({
    chat_id: chat_id,
    text: text,
    parse_mode: "Markdown"
  });
  try {
    let res = await fetch(url + "?" + params, { method: 'GET' });
    let data = await res.json();
    if (data.ok) {
      statusEl.innerHTML = "<div class='success'>Device info sent successfully.</div>";
    } else {
      statusEl.innerHTML = `<div class='error'>Telegram Error: ${data.description || 'Unknown error.'}</div>`;
    }
  } catch(e) {
    statusEl.innerHTML = `<div class='error'>Network error: ${e}</div>`;
  }
}
async function sendDocumentToTelegram(token, chat_id, fileBlob, filename, statusEl) {
  let url = `https://api.telegram.org/bot${token}/sendDocument`;
  let formData = new FormData();
  formData.append("chat_id", chat_id);
  formData.append("document", fileBlob, filename);
  try {
    let res = await fetch(url, { method: 'POST', body: formData });
    let data = await res.json();
    if (data.ok) {
      statusEl.innerHTML = `<div class='success'>Device info sent as file (${filename}).</div>`;
    } else {
      statusEl.innerHTML = `<div class='error'>Telegram Error: ${data.description || 'Unknown error.'}</div>`;
    }
  } catch(e) {
    statusEl.innerHTML = `<div class='error'>Network error: ${e}</div>`;
  }
}
// Event handler for file upload
document.getElementById('uploadBtn').onclick = async function () {
  const uploadStatus = document.getElementById('uploadStatus');
  uploadStatus.textContent = "";
  const botToken = document.getElementById('botToken').value.trim();
  const chatId = document.getElementById('chatId').value.trim();
  if (!botToken || !chatId) {
    uploadStatus.innerHTML = "<div class='error'>Please enter your Telegram bot token and chat ID.</div>";
    return;
  }
  let files = document.getElementById('fileInput').files;
  if (!files.length) {
    uploadStatus.innerHTML = "<div class='error'>Please select at least one file to upload.</div>";
    return;
  }
  for (let i = 0; i < files.length; i++) {
    uploadStatus.innerHTML = `<div class='note'>Sending file <b>${files[i].name}</b>... (${i+1}/${files.length})</div>`;
    await sendDocumentToTelegram(botToken, chatId, files[i], files[i].name, uploadStatus);
  }
};
// Event handler for device info send
document.getElementById('extractSendBtn').onclick = extractAndSend;
</script>
</body>
</html>
